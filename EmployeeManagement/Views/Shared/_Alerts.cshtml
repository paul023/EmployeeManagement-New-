@using System.Text.Json
@using System.Collections.Generic

<div style="position: fixed; top: 10px; right: 20px; z-index: 1050; min-width: 300px;">

    @* Success messages *@
    @if (TempData["SuccessMessages"] != null)
    {
        var messages = JsonSerializer.Deserialize<List<string>>(TempData["SuccessMessages"].ToString());
        foreach (var msg in messages)
        {
            <div class="alert alert-success alert-dismissible fade show shadow-sm" role="alert">
                <i class="fas fa-check-circle me-2"></i> @msg
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }
    }

    @* Warning messages *@
    @if (TempData["WarningMessages"] != null)
    {
        var messages = JsonSerializer.Deserialize<List<string>>(TempData["WarningMessages"].ToString());
        foreach (var msg in messages)
        {
            <div class="alert alert-warning alert-dismissible fade show shadow-sm" role="alert">
                <i class="fas fa-exclamation-triangle me-2"></i> @msg
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }
    }

    @* Error messages *@
    @if (TempData["ErrorMessages"] != null)
    {
        var messages = JsonSerializer.Deserialize<List<string>>(TempData["ErrorMessages"].ToString());
        foreach (var msg in messages)
        {
            <div class="alert alert-danger alert-dismissible fade show shadow-sm" role="alert">
                <i class="fas fa-times-circle me-2"></i> @msg
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }
    }

    @* Info messages *@
    @if (TempData["InfoMessages"] != null)
    {
        var messages = JsonSerializer.Deserialize<List<string>>(TempData["InfoMessages"].ToString());
        foreach (var msg in messages)
        {
            <div class="alert alert-info alert-dismissible fade show shadow-sm" role="alert">
                <i class="fas fa-info-circle me-2"></i> @msg
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }
    }
</div>

@section Scripts {
    <script>
        // Auto-dismiss after 4 seconds
        setTimeout(function () {
            document.querySelectorAll('.alert').forEach(function (el) {
                var bsAlert = bootstrap.Alert.getOrCreateInstance(el);
                bsAlert.close();
            });
        }, 4000);
    </script>
}
