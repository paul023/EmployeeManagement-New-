@using System.Text.Json
@using System.Collections.Generic

<div style="position: fixed; top: 10px; right: 20px; z-index: 1050; min-width: 300px;">
    @* Success *@
    @if (TempData["SuccessMessages"] != null)
    {
        var messages = JsonSerializer.Deserialize<List<string>>(TempData["SuccessMessages"].ToString());
        foreach (var msg in messages)
        {
            <div class="alert alert-success alert-dismissible fade show shadow-sm" role="alert">
                <i class="fas fa-check-circle mr-2"></i> @msg
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        }
    }

    @* Warning *@
    @if (TempData["WarningMessages"] != null)
    {
        var messages = JsonSerializer.Deserialize<List<string>>(TempData["WarningMessages"].ToString());
        foreach (var msg in messages)
        {
            <div class="alert alert-warning alert-dismissible fade show shadow-sm" role="alert">
                <i class="fas fa-exclamation-triangle mr-2"></i> @msg
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        }
    }

    @* Error *@
    @if (TempData["ErrorMessages"] != null)
    {
        var messages = JsonSerializer.Deserialize<List<string>>(TempData["ErrorMessages"].ToString());
        foreach (var msg in messages)
        {
            <div class="alert alert-danger alert-dismissible fade show shadow-sm" role="alert">
                <i class="fas fa-times-circle mr-2"></i> @msg
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        }
    }

    @* Info *@
    @if (TempData["InfoMessages"] != null)
    {
        var messages = JsonSerializer.Deserialize<List<string>>(TempData["InfoMessages"].ToString());
        foreach (var msg in messages)
        {
            <div class="alert alert-info alert-dismissible fade show shadow-sm" role="alert">
                <i class="fas fa-info-circle mr-2"></i> @msg
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        }
    }
</div>

@* @section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
          setTimeout(function () {
            document.querySelectorAll('.alert.fade.show').forEach(function (el) {
              el.classList.remove('show'); // triggers fade
              setTimeout(() => el.remove(), 700); // remove element after fade
            });
          }, 4000);
        });
    </script> *@

}
